var player;function registerevents(){player=document.player,socket.on("player",function(data){player.setdata(data.playing),player.current=data.playing})}$(function(){socket&&registerevents(),player=new Player});const Player=class{constructor(){this.song=null,this.queue=[],this.current=null,this.cons()}};Player.prototype.prev=function(){console.log("prev")},Player.prototype.next=function(){console.log("next")},Player.prototype.playpause=function(){console.log("playpause")},Player.prototype.setdata=function(data){var newviews;console.log(data),views=parseInt(data.view_count),views>1e6?newviews=Math.floor(views/1e6)+"m":views>1e3&&(newviews=Math.floor(views/1e3)+"k"),this.p.find(".playertitle").html((data.track||data.title)+"<br>"+(data.artist||data.uploader)+" &#8226; "+(newviews||views)+" views"),this.p.find(".playericon").css("background-image","url('"+data.thumbnails[0].url+"')")},Player.prototype.cons=function(){this.p=$("<div/>",{id:"MaplePlayer",css:{width:"100%",height:"70px",background:$("body").css("background-color"),"z-index":999998,left:0,bottom:0,position:"fixed"}}),buttons=$("<div/>",{class:"playerbuttons",css:{position:"relative",float:"Left",height:"100%"}}).appendTo(this.p),button=function(class_,text_,click){$("<div/>",{class:class_,text:text_,css:{width:"45px",height:"45px","line-height":"45px","text-align":"center",color:"white","font-size":"30px",cursor:"pointer","border-radius":"50%","margin-top":"12.5px","margin-left":"20px",float:"left","transition-duration":"150ms"},mouseenter:()=>{$("."+class_).css("background","#333333")},mouseout:function(){$("."+class_).css("background","transparent")},click:function(){click()}}).appendTo(buttons)},button("prevplayer","⏮",this.prev),button("playpause","⯇",this.playpause),button("playernext","⏭",this.next),$("<div/>",{class:"playertime",text:"2.58 / 3.00",css:{position:"relative",float:"Left",width:"100px",height:"100%","line-height":$(this.p).height()+"px","text-align":"center","margin-left":"20px",color:"#bbb9b9"}}).appendTo(this.p),playerinfocontainer=$("<div/>",{class:"playerinfocontainer",css:{position:"relative",display:"flex",float:"Left",width:"calc(100% - 535px)",height:"100%","text-align":"center","margin-left":"20px",color:"#bbb9b9","justify-content":"center","flex-wrap":"wrap"}}).appendTo(this.p),$("<div/>",{class:"playericon",css:{position:"relative",float:"Left",width:"30px",height:"30px","margin-top":"20px",background:"url('/static/images/source.gif') center no-repeat","background-size":"cover","text-align":"center","margin-left":"20px",color:"#bbb9b9"}}).appendTo(playerinfocontainer),$("<div/>",{class:"playertitle",html:"Rise (feat. Jack & Jack & Jack) <br/> Jonas Blue, Jack & Jack & Jack • Blue • 2018",css:{float:"Left",height:"30px","margin-top":"12.5px","text-align":"left","margin-left":"20px",color:"#bbb9b9"}}).appendTo(playerinfocontainer),playperc=$("<div/>",{class:"playperc",css:{position:"absolute",width:"100%",height:"1px",bottom:"67px",display:"inline-block",left:"0px",cursor:"pointer","z-index":999999,background:"black"}}).appendTo("body"),$("head").append("<style>.playperc:after {content:''; position:absolute;top:-10px; bottom:-10px; left:-10px; right:-10px; }</style>"),$("<div/>",{class:"backgroundperc",css:{position:"absolute",width:"10%",height:"2px",background:"aqua",top:"0px",left:"0px"}}).appendTo(playperc),$("body").append(this.p)},$(document).on("click",".result .play",function(){id_=$(this).closest(".result").attr("data-id"),socket.emit("play",{id:id_})});